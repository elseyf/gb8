# GB8 Test Program, by el_seyf

:org 0x0800
: font
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
    :byte 0x00 0x08 0x08 0x08 0x08 0x00 0x08 0x00
    :byte 0x00 0x36 0x12 0x12 0x00 0x00 0x00 0x00
    :byte 0x00 0x24 0x7E 0x24 0x24 0x7E 0x24 0x00
    :byte 0x08 0x1E 0x28 0x1C 0x0A 0x3C 0x08 0x00
    :byte 0x00 0x22 0x54 0x28 0x14 0x2A 0x44 0x00
    :byte 0x00 0x18 0x24 0x30 0x44 0x46 0x38 0x00
    :byte 0x00 0x18 0x08 0x08 0x00 0x00 0x00 0x00
    :byte 0x00 0x08 0x10 0x10 0x10 0x10 0x08 0x00
    :byte 0x00 0x10 0x08 0x08 0x08 0x08 0x10 0x00
    :byte 0x00 0x22 0x14 0x08 0x14 0x22 0x00 0x00
    :byte 0x00 0x08 0x08 0x3E 0x08 0x08 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x18 0x08 0x08 0x00
    :byte 0x00 0x00 0x00 0x3E 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x08 0x00 0x00
    :byte 0x00 0x02 0x04 0x08 0x10 0x20 0x40 0x00
    :byte 0x00 0x3C 0x46 0x46 0x46 0x46 0x3C 0x00
    :byte 0x00 0x38 0x18 0x18 0x18 0x18 0x18 0x00
    :byte 0x00 0x7C 0x06 0x3C 0x60 0x60 0x7E 0x00
    :byte 0x00 0x78 0x0C 0x7C 0x06 0x06 0x7C 0x00
    :byte 0x00 0x4C 0x4C 0x4C 0x4C 0x7E 0x0C 0x00
    :byte 0x00 0x7C 0x40 0x7C 0x06 0x06 0x7C 0x00
    :byte 0x00 0x3C 0x40 0x7C 0x46 0x46 0x3C 0x00
    :byte 0x00 0x7E 0x06 0x06 0x06 0x06 0x06 0x00
    :byte 0x00 0x3C 0x46 0x3C 0x46 0x46 0x3C 0x00
    :byte 0x00 0x3C 0x46 0x46 0x3E 0x06 0x3C 0x00
    :byte 0x00 0x18 0x18 0x00 0x00 0x18 0x18 0x00
    :byte 0x00 0x18 0x18 0x00 0x18 0x08 0x08 0x00
    :byte 0x00 0x00 0x04 0x08 0x10 0x08 0x04 0x00
    :byte 0x00 0x00 0x3E 0x00 0x3E 0x00 0x00 0x00
    :byte 0x00 0x00 0x20 0x10 0x08 0x10 0x20 0x00
    :byte 0x00 0x1C 0x22 0x22 0x0C 0x00 0x08 0x00
    :byte 0x3C 0x42 0x99 0xA5 0x9E 0x40 0x3F 0x00
    :byte 0x00 0x3C 0x42 0x42 0x7E 0x42 0x42 0x00
    :byte 0x00 0x7C 0x42 0x7C 0x42 0x42 0x7C 0x00
    :byte 0x00 0x3E 0x40 0x40 0x40 0x40 0x3E 0x00
    :byte 0x00 0x7C 0x42 0x42 0x42 0x42 0x7C 0x00
    :byte 0x00 0x7E 0x40 0x7E 0x40 0x40 0x7E 0x00
    :byte 0x00 0x7E 0x40 0x7E 0x40 0x40 0x40 0x00
    :byte 0x00 0x3E 0x40 0x4E 0x42 0x42 0x3E 0x00
    :byte 0x00 0x42 0x42 0x7E 0x42 0x42 0x42 0x00
    :byte 0x00 0x1C 0x08 0x08 0x08 0x08 0x1C 0x00
    :byte 0x00 0x0E 0x04 0x04 0x44 0x44 0x38 0x00
    :byte 0x00 0x42 0x44 0x48 0x58 0x64 0x42 0x00
    :byte 0x00 0x40 0x40 0x40 0x40 0x40 0x7E 0x00
    :byte 0x00 0x42 0x66 0x5A 0x42 0x42 0x42 0x00
    :byte 0x00 0x42 0x62 0x52 0x4A 0x46 0x42 0x00
    :byte 0x00 0x3C 0x42 0x42 0x42 0x42 0x3C 0x00
    :byte 0x00 0x7C 0x42 0x42 0x7C 0x40 0x40 0x00
    :byte 0x00 0x3C 0x42 0x42 0x4A 0x44 0x3A 0x00
    :byte 0x00 0x7C 0x42 0x42 0x7C 0x44 0x42 0x00
    :byte 0x00 0x3E 0x40 0x3C 0x02 0x02 0x7C 0x00
    :byte 0x00 0x3E 0x08 0x08 0x08 0x08 0x08 0x00
    :byte 0x00 0x42 0x42 0x42 0x42 0x42 0x3C 0x00
    :byte 0x00 0x42 0x42 0x42 0x24 0x24 0x18 0x00
    :byte 0x00 0x42 0x42 0x42 0x5A 0x66 0x42 0x00
    :byte 0x00 0x42 0x24 0x18 0x18 0x24 0x42 0x00
    :byte 0x00 0x22 0x14 0x08 0x08 0x08 0x08 0x00
    :byte 0x00 0x7E 0x04 0x08 0x10 0x20 0x7E 0x00
    :byte 0x00 0x18 0x10 0x10 0x10 0x10 0x18 0x00
    :byte 0x00 0x40 0x20 0x10 0x08 0x04 0x02 0x00
    :byte 0x00 0x18 0x08 0x08 0x08 0x08 0x18 0x00
    :byte 0x00 0x08 0x14 0x22 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x00 0x00 0x00 0x00 0xFF 0x00
    :byte 0x00 0x18 0x10 0x10 0x00 0x00 0x00 0x00
    :byte 0x00 0x00 0x1C 0x02 0x1E 0x22 0x1E 0x00
    :byte 0x00 0x20 0x20 0x2C 0x32 0x22 0x3C 0x00
    :byte 0x00 0x00 0x1E 0x20 0x20 0x20 0x1E 0x00
    :byte 0x00 0x02 0x02 0x1A 0x26 0x22 0x1E 0x00
    :byte 0x00 0x00 0x1C 0x22 0x3C 0x20 0x1E 0x00
    :byte 0x00 0x0C 0x10 0x3C 0x10 0x10 0x10 0x00
    :byte 0x00 0x00 0x1E 0x22 0x1E 0x02 0x3C 0x00
    :byte 0x00 0x20 0x20 0x2C 0x32 0x22 0x22 0x00
    :byte 0x00 0x08 0x00 0x08 0x08 0x08 0x08 0x00
    :byte 0x00 0x04 0x00 0x04 0x04 0x24 0x18 0x00
    :byte 0x00 0x20 0x22 0x24 0x28 0x34 0x22 0x00
    :byte 0x00 0x10 0x08 0x08 0x08 0x08 0x0C 0x00
    :byte 0x00 0x00 0x34 0x2A 0x2A 0x2A 0x2A 0x00
    :byte 0x00 0x00 0x2C 0x32 0x22 0x22 0x22 0x00
    :byte 0x00 0x00 0x1C 0x22 0x22 0x22 0x1C 0x00
    :byte 0x00 0x00 0x3C 0x22 0x32 0x2C 0x20 0x00
    :byte 0x00 0x00 0x1E 0x22 0x26 0x1A 0x02 0x00
    :byte 0x00 0x00 0x20 0x2C 0x32 0x20 0x20 0x00
    :byte 0x00 0x00 0x1E 0x20 0x1C 0x02 0x3C 0x00
    :byte 0x00 0x08 0x3E 0x08 0x08 0x08 0x06 0x00
    :byte 0x00 0x00 0x22 0x22 0x22 0x26 0x1A 0x00
    :byte 0x00 0x00 0x22 0x14 0x14 0x08 0x08 0x00
    :byte 0x00 0x00 0x2A 0x2A 0x2A 0x14 0x14 0x00
    :byte 0x00 0x00 0x22 0x14 0x08 0x14 0x22 0x00
    :byte 0x00 0x00 0x22 0x14 0x08 0x10 0x20 0x00
    :byte 0x00 0x00 0x3E 0x04 0x08 0x10 0x3E 0x00
    :byte 0x08 0x10 0x10 0x20 0x10 0x10 0x08 0x00
    :byte 0x00 0x08 0x08 0x08 0x08 0x08 0x08 0x00
    :byte 0x10 0x08 0x08 0x04 0x08 0x08 0x10 0x00
    :byte 0x00 0x32 0x4C 0x00 0x00 0x00 0x00 0x00
    :byte 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF
:calc font_l { font & 0xFF }
:calc font_h { font >> 8 }

:macro load_i_vx_vy vx vy {
    v0 := vx
    v1 := 0x0F
    v0 &= v1
    v1 := 0xA0
    v0 |= v1
    i := load_i_vx_vy_func
    save v0
    v0 := vy
    save v0
    load_i_vx_vy_func
}
:macro load_i_font char {
    v2 := char
    v3 := 0
    
    v2 <<= v2
    v1 := vf
    v3 <<= v3
    v3 |= v1
    v2 <<= v2
    v1 := vf
    v3 <<= v3
    v3 |= v1
    v2 <<= v2
    v1 := vf
    v3 <<= v3
    v3 |= v1
    
    v2 += font_l
    v3 += vf
    v3 += font_h
    load_i_vx_vy v3 v2
}

: load_i_vx_vy_func
    i := 0
    return

: text
    :byte 0x43 0x48 0x49 0x50 0x2D 0x38 0x20 0x20 0x66 0x6F 0x72 0x20 0x20 0x20 0x20 0x20 0x47 0x61 0x6D 0x65 0x62 0x6F 0x79
:calc text_l { text & 0xFF }
:calc text_h { text >> 8 }
:const text_length 23

: main
    v3 := text_h
    v2 := text_l
    v4 := 0
    v5 := 0
    v6 := 0
    loop
        v3 := text_h
        v2 := text_l
        v2 += v4
        load_i_vx_vy v3 v2
        load v0
        load_i_font v0
        sprite v5 v6 8
        
        v4 += 1
        if v4 == text_length then jump main_end
        v5 += 8
        if v5 == 64 begin
            v5 := 0
            v6 += 8
        end
    again
: main_end
    jump main_end